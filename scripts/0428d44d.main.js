require(["esri/map","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/FeatureLayer","esri/geometry/Extent","esri/tasks/GeometryService","esri/tasks/ProjectParameters","esri/geometry/Point","dojo/io-query","dojo/domReady!"],function(a,b,c,d,e,f,g,h){function i(){var a=document.URL,b=a.substring(a.indexOf("?")+1,a.length);return h.queryToObject(b).reachid}var j="http://services.arcgis.com/SgB3dZDkkUxpEHxu/arcgis/rest/services/aw_reach_17_search/FeatureServer/0",k="http://services.arcgis.com/SgB3dZDkkUxpEHxu/arcgis/rest/services/aw_reach_17_search/FeatureServer/3",l="http://services.arcgis.com/SgB3dZDkkUxpEHxu/arcgis/rest/services/aw_reach_17_search/FeatureServer/1",m="http://services.arcgis.com/SgB3dZDkkUxpEHxu/arcgis/rest/services/aw_reach_17_search/FeatureServer/2",n="http://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer",o="http://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",p="awid",q=i(),r=new a("map-div"),s=new b(n);r.addLayer(s);var t=new c(j),u=new c(k),v=new c(l),w=new c(m),x=[t,u,v,w];t.setDefinitionExpression(p+" LIKE '%"+q+"'"),u.setDefinitionExpression(p+" LIKE '%"+q+"'"),v.setDefinitionExpression("putin LIKE '%"+q+"'"),w.setDefinitionExpression("takeout LIKE '%"+q+"'");for(var y=0;y<x.length;y++)r.addLayer(x[y]);r.on("load",function(){var a=u.queryFeatures(p+" LIKE '%"+q+"'");a.then(function(a){featureList=a.features;for(var b=featureList[0].geometry.getExtent(),c=0;c<featureList.length;c++){var h=featureList[c].geometry.getExtent();h.xmin<b.xmin&&b.update(h.xmin,b.ymin,b.xmax,b.ymax,b.spatialReference),h.ymin<b.ymin&&b.update(b.xmin,h.ymin,b.xmax,b.ymax,b.spatialReference),h.xmax>b.xmax&&b.update(b.xmin,b.ymin,h.xmax,b.ymax,b.spatialReference),h.ymax>b.ymax&&b.update(b.xmin,b.ymin,b.xmax,h.ymax,b.spatialReference)}var i=new f;i.geometries=[new g(b.xmin,b.ymin,b.spatialReference),new g(b.xmax,b.ymax,b.spatialReference)],i.outSR=r.spatialReference;var j=new e(o),k=j.project(i);k.then(function(a){var b=new d(a[0].x,a[0].y,a[1].x,a[1].y,r.spatialReference);r.setExtent(b,!0)})})})});